function httpInterceptor(e,r,t){return{request:function(e){return t.token&&(e.headers.Authorization=t.token),e},responseError:function(r){return console.warn(r),r.data&&r.data.error?e.reject(r.data.error.statusCode+" - "+r.data.error.message):e.reject(r.status+" - "+r.statusText)}}}function settings(e){return{pageTitle:"O2O",firebaseReady:!1,walletBalance:0}}function runBlock(e,r,t,o,n){e.$settings=o,t.onStart({},function(t){n.isLoggedIn()||r.go("authentication.login");var o=t.$to().data;if(o.authorizedRoles){n.getUser();for(var a=!1,i=0,l=o.authorizedRoles.length;i<l;i++)a=a||n.getRole()==o.authorizedRoles[i];a||r.go("app.home")}e.$settings.pageTitle=o.pageTitle})}function sum(){return function(e,r){return e.reduce(function(e,t){return e+t[r]},0)}}function messageTime(e){return function(r){return r?(r=new Date(r)).toDateString()==(new Date).toDateString()?`${e("date")(r,"HH:mm")}`:e("date")(r,"dd MMM yyyy - HH:mm"):"never"}}function timeDifference(){return function(e,r){if(!e)return"never";if(r||(r=(new Date).getTime()),angular.isDate(e)?e=e.getTime():"string"==typeof e&&(e=new Date(e).getTime()),angular.isDate(r)?r=r.getTime():"string"==typeof r&&(r=new Date(r).getTime()),"NaN"===r&&(r=(new Date).getTime()),"number"==typeof e&&"number"==typeof r){var t=(r-e)/1e3,o=[];if(!isNaN(t)){var n=t%60,a=Math.round(Math.abs(t/3600)).toString(),i=Math.round(Math.abs(n/60)).toString(),l=Math.round(Math.abs(n%60)).toString();return o.push(("00"+a).substring(a.length)),o.push(("00"+i).substring(i.length)),o.push(("00"+l).substring(l.length)),o.join(":")}}}}function routeConfig(e,r,t){t.html5Mode(!0),r.otherwise("/"),e.state("authentication",{abstract:!0,views:{root:{templateUrl:"app/layout/auth-layout.html"}}}).state("authentication.login",{url:"/login",templateUrl:"app/authentication/login.html",data:{pageTitle:"Login"},controller:"LoginController",controllerAs:"vm"}).state("app",{abstract:!0,views:{root:{templateUrl:"app/layout/app-layout.html"}}}).state("app.home",{url:"/",templateUrl:"app/home/index.html",data:{pageTitle:"Home"},controller:"HomeController",controllerAs:"vm"}).state("app.product",{url:"/search?:keyword&:brand&:category",templateUrl:"app/product/index.html",data:{pageTitle:"Products"},controller:"ProductController",controllerAs:"vm"}).state("app.checkout",{url:"/checkout",templateUrl:"app/order/checkout.html",data:{pageTitle:"Checkout"},controller:"OrderCheckoutController",controllerAs:"vm"}).state("app.confirm",{url:"/confirm",templateUrl:"app/order/confirm.html",data:{pageTitle:"Confirm Order"},controller:"OrderConfirmController",controllerAs:"vm"}).state("app.confirm-message",{url:"/confirm-message/{code}",templateUrl:"app/order/confirm-message.html",data:{pageTitle:"Confirmation Message Order"},controller:"OrderConfirmMessageController",controllerAs:"vm"}).state("app.notification",{url:"/notification",templateUrl:"app/notification/index.html",data:{pageTitle:"Notifications"},controller:"NotificationController",controllerAs:"vm"}).state("app.order",{url:"/order",templateUrl:"app/order/index.html",data:{pageTitle:"Order",authorizedRoles:["staff"]},controller:"OrderController",controllerAs:"vm"}).state("app.order.history",{url:"/history",templateUrl:"app/order/index.history.html",data:{pageTitle:"History",authorizedRoles:["staff"]},controller:"OrderHistoryController",controllerAs:"vm"}).state("app.order.track",{url:"/track/{code}",templateUrl:"app/order/index.track.html",data:{pageTitle:"Track",authorizedRoles:["staff"]},controller:"OrderTrackController",controllerAs:"vm"}).state("app.order.verify",{url:"/verify",templateUrl:"app/order/index.verify.html",data:{pageTitle:"Verify",authorizedRoles:["staff"]},controller:"OrderVerifyController",controllerAs:"vm"}).state("app.order.draft",{url:"/draft",templateUrl:"app/order/index.draft.html",data:{pageTitle:"Draft",authorizedRoles:["staff"]},controller:"OrderDraftController",controllerAs:"vm"}).state("app.order.checkin",{url:"/check-in",templateUrl:"app/order/index.checkin.html",data:{pageTitle:"Check In",authorizedRoles:["staff"]},controller:"OrderCheckInController",controllerAs:"vm"}).state("app.order.detail",{url:"/{code}",templateUrl:"app/order/index.detail.html",data:{pageTitle:"Order Detail",authorizedRoles:["staff"]},controller:"OrderDetailController",controllerAs:"vm"}).state("app.order-payment",{url:"/order/{code}/payment",templateUrl:"app/order/payment.html",data:{pageTitle:"Order Payment",authorizedRoles:["staff"]},controller:"OrderPaymentController",controllerAs:"vm"}).state("blank",{abstract:!0,views:{root:{templateUrl:"app/layout/blank-layout.html"}}}).state("blank.invoice",{url:"/order/{code}/invoice/{paymentId}",templateUrl:"app/invoice/invoice.html",data:{pageTitle:"Invoice",authorizedRoles:["staff"]},controller:"InvoiceController",controllerAs:"vm"})}function AuthenticationService(e,r){return{signIn:function(o){return e.post(r.BASE_API+"/users/login",o).then(t)},signOut:function(){return e.post(r.BASE_API+"/users/logout").then(t)},getAuthenticatedUser:function(o){return e.get(r.BASE_API+"/users/"+o).then(t)},getKioskUser:function(o){var n={filter:{where:{UserId:o},include:["Kiosk"]}};return e.get(r.BASE_API+"/kioskusers?"+$.param(n)).then(t)},getRoleUser:function(o){var n={filter:{where:{principalType:"USER",principalId:o},include:{relation:"role"}}};return e.get(r.BASE_API+"/rolemappings?"+$.param(n)).then(t)},changePassword:function(o){return e.post(`${r.BASE_API}/users/change-password`,o).then(t)}};function t(e){return e.data}}function BrandService(e,r){return{getAll:function(){return e.get(r.BASE_API+"/brands").then(t)}};function t(e){return e.data}}function CategoryService(e,r){return{getByBrandCode:function(o){var n={where:{BrandCode:o}};return e.get(r.BASE_API+"/productcategories",{params:{filter:JSON.stringify(n)}}).then(t)}};function t(e){return e.data}}function DealerService(e,r){return{getUserIdByDealerCode:function(o){var n={where:{DealerCode:o}};return e.get(r.BASE_API+"/dealerUsers",{params:{filter:JSON.stringify(n)}}).then(t)}};function t(e){return e.data}}function HomeService(){}function NotificationService(e,r){return{getAllByUserId:function(o,n){var a=n.orderBy.indexOf("+")>-1,i={order:n.orderBy.substring(1)+(a?" ASC":" DESC"),limit:n.limit,skip:(n.page-1)*n.limit,where:{UserId:o}};return e.get(r.BASE_API+"/notifications",{params:{filter:JSON.stringify(i)}}).then(t)},countAllByUserId:function(o,n){var a={UserId:o};return e.get(r.BASE_API+"/notifications/count",{params:{where:JSON.stringify(a)}}).then(t)},getAllUnreadByUserId:function(o,n){var a=n.orderBy.indexOf("+")>-1,i={order:n.orderBy.substring(1)+(a?" ASC":" DESC"),limit:n.limit,skip:(n.page-1)*n.limit,where:{IsRead:0,UserId:o}};return e.get(r.BASE_API+"/notifications",{params:{filter:JSON.stringify(i)}}).then(t)},getTotalUnreadNotifications:function(o){var n={IsRead:0,UserId:o};return e.get(r.BASE_API+"/notifications/count",{params:{where:JSON.stringify(n)}}).then(t)},setRead:function(o){return e.patch(r.BASE_API+"/notifications/"+o,{IsRead:!0}).then(t)}};function t(e){return e.data}}function OrderService(e,r){return{getAll:function(o,n){var a=o.orderBy.indexOf("+")>-1,i={order:o.orderBy.substring(1)+(a?" ASC":" DESC"),limit:o.limit,skip:(o.page-1)*o.limit,where:{and:[{or:[{Code:{like:"%"+o.keyword+"%"}},{Name:{like:"%"+o.keyword+"%"}}]},{KioskCode:n}]}};return e.get(r.BASE_API+"/orders",{params:{filter:JSON.stringify(i)}}).then(t)},countAll:function(o,n){var a={and:[{or:[{Code:{like:"%"+o.keyword+"%"}},{Name:{like:"%"+o.keyword+"%"}}]},{KioskCode:n}]};return e.get(r.BASE_API+"/orders/count?where="+encodeURI(JSON.stringify(a))).then(t)},getAllHistory:function(o,n){var a=o.orderBy.indexOf("+")>-1,i={order:o.orderBy.substring(1)+(a?" ASC":" DESC"),limit:o.limit,skip:(o.page-1)*o.limit,where:{and:[{or:[{Code:{like:"%"+o.keyword+"%"}},{Name:{like:"%"+o.keyword+"%"}}]},{Status:{nin:["DRAFTED","VOIDED"]}},{KioskCode:n}]}};return e.get(r.BASE_API+"/orders",{params:{filter:JSON.stringify(i)}}).then(t)},countAllHistory:function(o,n){var a={and:[{or:[{Code:{like:"%"+o.keyword+"%"}},{Name:{like:"%"+o.keyword+"%"}}]},{Status:{nin:["DRAFTED","VOIDED"]}},{KioskCode:n}]};return e.get(r.BASE_API+"/orders/count?where="+encodeURI(JSON.stringify(a))).then(t)},getAllDraft:function(o,n){var a=o.orderBy.indexOf("+")>-1,i={include:[],order:o.orderBy.substring(1)+(a?" ASC":" DESC"),limit:o.limit,skip:(o.page-1)*o.limit,where:{and:[{or:[{Code:{like:"%"+o.keyword+"%"}},{Name:{like:"%"+o.keyword+"%"}}]},{Status:"DRAFTED"},{KioskCode:n}]}};return e.get(r.BASE_API+"/orders",{params:{filter:JSON.stringify(i)}}).then(t)},countAllDraft:function(o,n){var a={and:[{or:[{Code:{like:"%"+o.keyword+"%"}},{Name:{like:"%"+o.keyword+"%"}}]},{Status:"DRAFTED"},{KioskCode:n}]};return e.get(r.BASE_API+"/orders/count?where="+encodeURI(JSON.stringify(a))).then(t)},getByCode:function(o){return e.get(r.BASE_API+"/orders/"+o,{params:{filter:JSON.stringify({include:[{OrderDetails:["Product","OrderTracks"]},"OrderPayments"]})}}).then(t)},getByCodePIN:function(o,n){var a={where:{Code:o,PIN:n},include:[{OrderDetails:["Product","OrderTracks"]},"OrderPayments"]};return e.get(r.BASE_API+"/orders",{params:{filter:JSON.stringify(a)}}).then(t)},createDraft:function(o){return e.post(r.BASE_API+"/orders/draft",{data:o}).then(t)},updateDraft:function(o){return e.put(r.BASE_API+"/orders/draft",{data:o}).then(t)},voidDraft:function(o){return e.post(r.BASE_API+"/orders/void",{code:o}).then(t)},pay:function(o){return e.post(r.BASE_API+"/orders/payment",{data:o}).then(t)},updatePaymentStatus:function(o){return e.post(r.BASE_API+"/orders/payment-status",{code:o}).then(t)},complete:function(o){return e.post(r.BASE_API+"/orders/complete",{code:o}).then(t)},arrive:function(o){return e.post(r.BASE_API+"/orders/arrive",{code:o}).then(t)},detailArrive:function(o,n){return e.post(`${r.BASE_API}/orders/${o}/orderdetails/${n}/arrive`).then(t)}};function t(e){return e.data}}function ProductService(e,r){return{getAll:function(o,n){var a=o.orderBy.indexOf("+")>-1,i={order:o.orderBy.substring(1)+(a?" ASC":" DESC"),limit:o.limit,skip:(o.page-1)*o.limit,where:{Name:{like:"%"+(o.keyword||"")+"%"},BrandCode:o.brandCode,ProductCategoryCode:o.categoryCode,KioskCode:n}};0==o.priceRange.min&&0==o.priceRange.max||(i.where.Price={between:[o.priceRange.min,o.priceRange.max]});0!=o.priceRange.min&&0==o.priceRange.max&&(i.where.Price={gt:o.priceRange.min});return e.get(r.BASE_API+"/vmappedproducts",{params:{filter:JSON.stringify(i)}}).then(t)},getByCode:function(o){var n={where:{Code:o}};return e.get(r.BASE_API+"/vmappedproducts",{params:{filter:JSON.stringify(n)}}).then(t)},countAll:function(o,n){var a={and:[{Name:{like:"%"+(o.keyword||"")+"%"}},{BrandCode:o.brandCode},{ProductCategoryCode:o.categoryCode},{KioskCode:n}]};0==o.priceRange.min&&0==o.priceRange.max||a.and.push({Price:{between:[o.priceRange.min,o.priceRange.max]}});0!=o.priceRange.min&&0==o.priceRange.max&&a.and.push({Price:{gt:o.priceRange.min}});return e.get(r.BASE_API+"/vmappedproducts/count?where="+encodeURI(JSON.stringify(a))).then(t)}};function t(e){return e.data}}function ShippingService(e,r){return{getPricings:function(o,n,a){var i={origin:o,destination:n,weight:a};return e.post(r.BASE_API+"/orders/shipping/pricings",i).then(t)},getLocations:function(o){return e.get(r.BASE_API+"/orders/shipping/locations",{params:{keyword:o}}).then(t)},getWeightRoundingLimit:function(){return e.get(r.BASE_API+"/orders/shipping/weightroundinglimit").then(t)}};function t(e){return e.data}}function WalletService(e,r){return{getWalletBalance:function(o){return e.get(`${r.BASE_API}/orders/wallets/${o}`).then(t)}};function t(e){return e.data}}function AuthenticationState(e,r){return{setToken:function(e){r.token=e.id,r.tokenExpiredAt=new Date(new Date(e.created)+e.ttl)},getToken:function(){return r.token},setUser:function(e){r.user=e},getUser:function(){return r.user},isLoggedIn:function(){return!!r.user},remove:function(){r.$reset(),delete e.defaults.headers.common.Authorization},setRole:function(e){r.user.role=e},getRole:function(){return r.user.role},isGuest:function(){return!!r.user.role&&"guest"==r.user.role},isStaff:function(){return!!r.user.role&&"staff"==r.user.role}}}function MessageChannels(e,r){var t=new t;return this.rooms=[],{init:function(e){this.rooms=n(`users/${e}`)},add:function(e,r,t){var n=this.rooms.find(e=>e.userId==r);if(n)return n.show=!0,n.open=!0,this.fetchMessages(n),void o(this.rooms.$ref().key,n.$id,!0);this.rooms.$add({roomId:e,userId:r,username:t,timestamp:(new Date).getTime(),show:!0})},close:function(e){o(this.rooms.$ref().key,e.$id,!1)},fetchMessages:function(e){e.messages||(e.messages=n(`rooms/${e.roomId}`))},addMessage:function(e,r,t,a){i=e.roomId,l=e.userId,d=r,c=t,s=n(`users/${l}`),s.$loaded(()=>{var e=s.find(e=>e.roomId==i);e?o(l,e.$id,!0):s.$add({roomId:i,userId:d,username:c,timestamp:(new Date).getTime(),show:!0})}),e.messages.$add({userId:r,username:t,content:a,timestamp:(new Date).getTime()});var i,l,d,c,s}};function o(e,r,t){return firebase.database().ref(`users/${e}/${r}`).update({show:t})}function n(r){return e((t=r,firebase.database().ref(t)));var t}function t(){this.timestamp=+new Date;this.generate=function(e=8){for(var r,t,o=this.timestamp.toString().split("").reverse(),n="",a=0;a<e;++a){n+=o[(r=0,t=o.length-1,Math.floor(Math.random()*(t-r+1))+r)]}return n}}}function Order(e,r){return{getCurrentOrder:function(){e.order||t();return e.order},addOrderItem:function(o){e.order||t();var n=r("filter")(e.order.items,{sku:o.sku})[0];n?n.quantity++:(o.quantity=1,e.order.items.push(o))},removeOrderItem:function(r){var t=e.order.items.indexOf(r);e.order.items.splice(t,1)},initiateOrder:t};function t(){e.order={},e.order.items=[]}}function totalPrice(){return function(e){return e.reduce(function(e,r){return e+r.quantity*r.price},0)}}function totalDPNominal(){return function(e){return e.reduce(function(e,r){return e+r.quantity*(r.dp/100*r.price)},0)}}function dpNominal(){return function(e){return e.quantity*(e.dp/100*e.price)}}function humanify(){return function(e){return"DRAFTED"==e?"Pesanan dibuat oleh pembeli":"REQUESTED"==e?"Pesanan telah dikirim ke Dealer":"SUBMITTED"==e?"Sudah diterima oleh Dealer":"REJECTED"==e?"Dibatalkan oleh Dealer":"DELIVERED"==e?"Pesanan sedang diantar.":"ARRIVED"==e?"Pesanan sudah sampai di Outlet":"COMPLETED"==e?"Pesanan sudah diterima oleh Customer":"VOIDED"==e?"Pesanan dibatalkan oleh pembeli":"REFUNDED"==e?"Dana telah dikembalikan":e}}function ChangeModeModalController(e,r,t,o){var n=this;n.authenticatedUser=r.getUser(),n.verifyUser=function(a){return n.verifying=!0,e.signIn(a).then(e=>{r.isGuest()?r.setRole("staff"):r.isStaff()&&r.setRole("guest"),t.close()}).catch(e=>{o.error(e)}).finally(()=>{n.verifying=!1})},n.toGuestMode=function(){r.setRole("guest"),t.close()},n.data={email:n.authenticatedUser.email,password:""}}function ChangePasswordModalController(e,r,t,o){var n=this;n.changePassword=function(r){return n.loadingChangePassword=!0,e.changePassword(r).then(e=>{o.success("Password berhasil diubah"),t.close()}).catch(e=>{o.error(e)}).finally(()=>{n.loadingChangePassword=!1})},n.data={oldPassword:"",newPassword:"",retypeNewPassword:""}}function LoginController(e,r,t,o){var n=this;n.user={email:"",password:"",asGuest:!1},n.login=function(a){n.loading=!0,n.message="";var i={};e.signIn(a).then(function(o){r.setToken(o);var n=[];return n.push(e.getAuthenticatedUser(o.userId)),n.push(e.getKioskUser(o.userId)),n.push(e.getRoleUser(o.userId)),t.all(n)}).then(function(e){var t=e[0];if(i.id=t.id,i.email=t.email,i.username=t.username,0==(t=e[1]).length)throw"User ini tidak berada di kiosk manapun.";var a=t[0].Kiosk;i.kiosk={code:a.Code,name:a.Name,address:a.Address,phone:a.PhoneNumber,branchCode:a.BranchCode,branchName:a.BranchName},r.setUser(i),n.user.asGuest?r.setRole("guest"):r.setRole("staff"),o.go("app.home")}).catch(function(e){n.message=e,r.remove()}).finally(function(){n.loading=!1})}}function imageApi(e){return{restrict:"E",replace:!0,scope:{src:"=",name:"="},link:function(r){r.src=`${e.BASE_API}/${r.src}`},templateUrl:"app/components/image-api.html"}}function loadingIndicator(){return{restrict:"E",replace:!0,scope:{},templateUrl:"app/components/loading-indicator.html"}}function noData(){return{restrict:"E",replace:!0,scope:{},templateUrl:"app/components/no-data.html"}}function reloadIndicator(){return{restrict:"E",replace:!0,scope:{action:"&"},templateUrl:"app/components/reload-indicator.html"}}function HomeController(e,r,t,o,n,a,i){var l=this;function d(e,r){var t=angular.element(".featured-products").scrollLeft(),o=460*r;e?t+=o:t-=o,angular.element(".featured-products").animate({scrollLeft:t},300)}function c(e="BEST SELLER"){l.sliderType=e,"BEST SELLER"==e?(l.isError=!1,l.loadingProducts=!0,t.getAll({keyword:"",orderBy:"-Sold",page:1,limit:9,categoryCode:"*",priceRange:{min:0,max:0,display:"Semua"}},l.currentUser.kiosk.code).then(e=>{l.products=e}).catch(e=>{l.isError=!0}).finally(()=>{l.loadingProducts=!1})):(l.isError=!1,l.loadingProducts=!0,t.getAll({keyword:"",orderBy:"-CreatedDate",page:1,limit:9,categoryCode:"*",priceRange:{min:0,max:0,display:"Semua"}},l.currentUser.kiosk.code).then(e=>{l.products=e}).catch(e=>{l.isError=!0}).finally(()=>{l.loadingProducts=!1}))}function s(e){n.addOrderItem({code:e.Code,sku:e.SKU,name:e.Name,description:e.Description,specification:e.Specification,image:e.Image,brandCode:e.BrandCode,dp:e.DP,price:e.Price,dealerCode:e.DealerCode}),a.success("Item telah ditambahkan ke kerajang belanja.","Pesan")}l.currentUser=o.getUser(),l.next=function(e=1){d(!0,e)},l.prev=function(e=1){d(!1,e)},l.changeSliderType=c,l.openDetailItem=function(e){i.open({animation:!0,templateUrl:"app/product/detail.modal.html",controller:"ProductDetailModalController",controllerAs:"vm",size:"lg",resolve:{code:function(){return e.Code}}}).result.then(function(e){s(e)})},l.addOrderItem=s,c("BEST SELLER"),l.slides=[];var u=0;l.currentActiveSlide=0,l.slides.push({image:"build/images/banners/banner-1.jpg",text:[],id:u++})}function InvoiceController(e,r,t,o,n,a){var i,l=this;l.currentUser=a.getUser(),l.order={},l.orderPayment={},l.print=function(){o.print()},l.close=function(){o.close()},i=e.code,l.loadingGetOrderByCode=!0,n.getByCode(i).then(function(t){l.order=t;var n=l.order.OrderPayments.find(e=>"DOWN PAYMENT"==e.PaymentType);l.order.DPAmount=n?n.PaidAmount:0;var a=r("filter")(t.OrderPayments,{id:e.paymentId});0==a.length&&o.close(),l.orderPayment=a[0],l.order.RefundAmount=l.order.TotalPrice+l.order.TotalShippingFee-l.order.DPAmount-l.orderPayment.PaidAmount}).catch(function(e){toastr.error(e)}).finally(function(){l.loadingGetOrderByCode=!1})}function invoiceDownPayment(){return{restrict:"E",replace:!0,scope:{order:"=",orderPayment:"="},templateUrl:"app/invoice/_down-payment.html"}}function invoiceFulfillment(){return{restrict:"E",replace:!0,scope:{order:"=",orderPayment:"="},link:(e,r,t,o)=>{},templateUrl:"app/invoice/_fulfillment.html"}}function invoiceFullPayment(){return{restrict:"E",replace:!0,scope:{order:"=",orderPayment:"="},templateUrl:"app/invoice/_full-payment.html"}}function invoiceRefundment(){return{restrict:"E",replace:!0,scope:{order:"=",orderPayment:"="},link:(e,r,t,o)=>{},templateUrl:"app/invoice/_refundment.html"}}function FooterController(){this.currentYear=(new Date).getFullYear()}function HeaderController(e,r,t,o,n,a,i,l,d,c,s,u,p,f,m){var g=this,h=600;function y(){g.ticks--,0==g.ticks&&(C(),g.ticks=h),t(y,1e3)}function C(){var e,r=[];r.push((e={keyword:"",orderBy:"-NotifiedDate",page:1,limit:9},s.getAllUnreadByUserId(g.authenticatedUser.id,e))),r.push(s.getTotalUnreadNotifications(g.authenticatedUser.id)),g.loadingGetUnreadNotifications=!0,o.all(r).then(e=>{var r=e[0];g.notifications=r,r=e[1],g.totalUnreadNotifications=r.count}).catch(e=>{}).finally(()=>{g.loadingGetUnreadNotifications=!1})}function S(){return g.loadingGetWalletBalance=!0,u.getWalletBalance(g.authenticatedUser.email).then(e=>{var r=e.result;m.$settings.walletBalance=r.topupCredit+r.rewardCredit||0}).catch(e=>{}).finally(()=>{g.loadingGetWalletBalance=!1})}g.ticks=h,g.totalItemsOnCart=0,g.searchProduct=function(r){r&&e.go("app.product",{keyword:r,brand:"",category:"*"})},g.keyword=r.keyword,g.removeOrderItem=function(e){confirm("Apakah anda yakin untuk membatalkan transaksi item ini?")&&(a.removeOrderItem(e),n.warning("Item telah dihapus dari transaksi ini","Pesan"))},g.logout=function(){d.signOut(),c.remove(),a.initiateOrder(),e.go("authentication.login")},g.trackOrder=function(r){if(r.IsRead){var t=JSON.parse(r.Data);return void e.go("app.order.track",{code:t.orderCode})}if(r.loading)return;r.loading=!0,s.setRead(r.id).then(t=>{var o=JSON.parse(r.Data);e.go("app.order.track",{code:o.orderCode},{reload:!0})}).catch(e=>{}).finally(()=>{r.loading=!1})},g.openModalChangePassword=function(){p.open({animation:!0,templateUrl:"app/authentication/change-password.modal.html",controller:"ChangePasswordModalController",controllerAs:"vm",size:"sm"}).result.then(e=>{})},g.openModalChangeMode=function(){p.open({animation:!0,templateUrl:"app/authentication/change-mode.modal.html",controller:"ChangeModeModalController",controllerAs:"vm",size:"sm"}).result.then(e=>{f.location.reload()})},g.getWalletBalance=S,function(){l.getByBrandCode("SMG").then(function(e){g.categories=e}).catch(function(e){n.error(e)}).finally(function(){});var e=a.getCurrentOrder();g.cartItems=e.items,g.authenticatedUser=c.getUser(),g.isStaff=c.isStaff(),g.notifications=[],C(),S(),y()}()}function MessengerController(e,r,t,o,n,a){var i=this;i.currentDate=new Date,i.currentUser=r.getUser(),e.init(i.currentUser.id),i.rooms=e.rooms,i.rooms.$loaded(()=>{a.$settings.firebaseReady=!0}),i.sendMessage=function(r){if(!r.inputMessage)return;e.addMessage(r,i.currentUser.id,i.currentUser.username,r.inputMessage),r.inputMessage="",function(e,r=100){n(()=>{t.hash(`anchor_${e}`),o()},r)}(r.$id)},i.toggleOpenRoom=function(r){r.open=!r.open,r.open&&e.fetchMessages(r)},i.removeRoom=function(r){e.close(r)}}function NotificationController(e,r,t,o){var n=this;function a(e){n.isError=!1,n.loadingGetNotifications=!0,n.notifications=n.notifications||[];var t=[];t.push(o.getAllByUserId(n.currentUser.id,e)),t.push(o.countAllByUserId(n.currentUser.id,e)),r.all(t).then(r=>{r[0].forEach(e=>{n.notifications.push(e)});var t=r[1];e.count=t.count}).catch(e=>{n.isError=!0}).finally(()=>{n.loadingGetNotifications=!1})}n.currentUser=t.getUser(),n.getNotifications=a,n.next=function(){n.query.page++,a(n.query)},n.trackOrder=function(r){if(r.IsRead){var t=JSON.parse(r.Data);return void e.go("app.order.track",{code:t.orderCode})}if(r.loading)return;r.loading=!0,o.setRead(r.id).then(t=>{var o=JSON.parse(r.Data);e.go("app.order.track",{code:o.orderCode},{reload:!0})}).catch(e=>{}).finally(()=>{r.loading=!1})},n.query={keyword:"",orderBy:"-NotifiedDate",page:1,limit:25},a(n.query)}function OrderCheckoutController(e,r,t,o,n){var a=this;function i(e){a.shippingAddress.address=e?a.currentUser.kiosk.address:""}a.order={},a.shippingAddress={},a.removeOrderItem=function(e){confirm("Apakah anda yakin untuk membatalkan transaksi item ini?")&&(o.removeOrderItem(e),t.warning("Item telah dihapus dari transaksi ini","Pesan"))},a.updateAddress=function(r){a.order.name=r.name,a.order.phone=r.phone,a.order.email=r.email,a.order.address=r.address,a.order.idCard=r.idCard,a.order.toKiosk=r.toKiosk,a.order.kioskCode=a.currentUser.kiosk.code,e.go("app.confirm")},a.toggleToKiosk=i,a.currentUser=n.getUser(),a.order=o.getCurrentOrder(),0==a.order.items.length&&(t.warning("Keranjang belanja Anda kosong."),e.go("app.home")),a.order.toKiosk=void 0==a.order.toKiosk||a.order.toKiosk,a.shippingAddress={name:a.order.name,phone:a.order.phone,email:a.order.email,address:a.order.address,idCard:a.order.idCard,toKiosk:a.order.toKiosk},i(a.order.toKiosk)}function OrderConfirmMessageController(e){this.code=e.code}function OrderConfirmController(e,r,t,o,n,a,i,l){var d=this;d.order={},d.submitOrder=function(e){if(confirm("Apakah anda yakin ingin melakukan pemesanan?")){for(var r={KioskCode:e.kioskCode,InChargeEmail:d.isStaff?d.currentUser.email:"",IdCard:e.idCard,Name:e.name,Email:e.email,Latitude:0,Longitude:0,SelfPickUp:e.toKiosk,Address:e.address,Phone:e.phone,OrderDetails:[]},a=0,i=e.items.length;a<i;a++){var l=e.items[a];r.OrderDetails.push({ProductCode:l.code,Quantity:l.quantity,DealerCode:l.dealerCode})}d.loadingCreateDraft=!0,n.createDraft(r).then(function(e){o.initiateOrder(),d.isStaff?window.location.href=`order/${e.result.Code}`:window.location.href=`confirm-message/${e.result.Code}`}).catch(function(e){t.error(e)}).finally(function(){d.loadingCreateDraft=!1})}},d.cancelOrder=function(){confirm("Apakah anda yakin ingin membatalkan pemesanan?")&&(o.initiateOrder(),t.warning("Pesanan Anda telah berhasil dibatalkan.","Success"),a(function(){window.location.href=""},2e3))},d.currentUser=l.getUser(),d.isStaff=l.isStaff(),console.log(d.currentUser),d.order=o.getCurrentOrder(),0==d.order.items.length&&(t.warning("Keranjang belanja Anda kosong."),e.go("app.home"))}function OrderDetailModalController(e,r,t,o,n){var a,i=this;i.order={},i.close=function(){t.dismiss("cancel")},i.print=function(){o.print()},a=e,i.loadingGetOrderByCode=!0,r.getByCode(a).then(function(e){i.order=e}).catch(function(e){n.error(e)}).finally(function(){i.loadingGetOrderByCode=!1})}function OrderCheckInController(e,r){var t=this;t.getOrder=function(o){t.loadingGetOrder=!0,e.getByCode(o).then(e=>{"DELIVERED"==e.Status||"PARTIALLY DELIVERED"==e.Status||"PARTIALLY ARRIVED"==e.Status?e.SelfPickUp?t.order=e:r.error("This order should be delivered to customer"):r.error(`Invalid status: ${e.Status}`)}).catch(e=>{r.error(e)}).finally(()=>{t.loadingGetOrder=!1})},t.arriveOrderDetail=function(o){o.loading=!0,e.detailArrive(o.OrderCode,o.Code).then(r=>{if(r.result)return e.getByCode(o.OrderCode)}).then(e=>{t.order=e}).catch(e=>{r.error(e)}).finally(()=>{o.loading=!1})}}function OrderController(e){}function OrderDetailController(e,r,t,o,n,a,i,l,d){var c,s,u=this,p=.3;function f(e){return u.loadingPricings=!0,l.getPricings(u.currentUser.kiosk.branchName,e,1).then(e=>{u.pricingOptions=e.result[0].pricingOptions}).catch(e=>{d.error(e)}).finally(()=>{u.loadingPricings=!1})}function m(e){u.pricingOption=e,u.order.ShippingProductCode=e.productCode,u.order.ShippingDestination=u.destination?u.destination.display:u.order.ShippingDestination,u.order.ShippingDueDay=e.dueDay,g()}function g(){if(u.order.TotalShippingFee=0,u.order.TotalPrice=0,!u.order.SelfPickUp)for(var e=Array.from(new Set(u.order.OrderDetails.map(e=>e.DealerCode))),r=0,t=e.length;r<t;r++){var o=u.order.OrderDetails.filter(t=>t.DealerCode==e[r]).map(e=>e.Quantity*e.Product.Weight).reduce((e,r)=>e+r);o=0==o?0:o<1?1:o-Math.floor(o)>p?Math.ceil(o):Math.floor(o),u.order.TotalShippingFee+=o*u.pricingOption.calculationResult}for(r=0,t=u.order.OrderDetails.length;r<t;r++)u.order.TotalPrice+=u.order.OrderDetails[r].Quantity*u.order.OrderDetails[r].Product.Price}function h(){delete u.pricingOption,u.order.ShippingDestination="",u.order.ShippingProductCode="",u.order.ShippingDueDay=0,u.order.TotalShippingFee=0}u.order={},u.currentUser=a.getUser(),u.isStaff=a.isStaff(),u.toggleSelfPickUp=function(e){e?(u.order.Address=u.currentUser.kiosk.address,h(),delete u.destination,delete u.pricingOption):u.order.Address=""},u.updateDraft=function(r){u.loadingUpdateDraft=!0;for(var t={Code:r.Code,KioskCode:r.KioskCode,InChargeEmail:u.isStaff?u.currentUser.email:"",IdCard:r.IdCard,Name:r.Name,Email:r.Email,Address:r.Address,SelfPickUp:r.SelfPickUp,Phone:r.Phone,ShippingDestination:r.ShippingDestination,ShippingProductCode:r.ShippingProductCode,ShippingDueDay:r.ShippingDueDay,TotalShippingFee:r.TotalShippingFee,OrderDetails:[]},o=0,n=r.OrderDetails.length;o<n;o++){var a=r.OrderDetails[o];t.OrderDetails.push({Code:a.Code,OrderCode:a.OrderCode,ProductCode:a.ProductCode,DealerCode:a.DealerCode,Quantity:a.Quantity})}i.updateDraft(t).then(function(t){e.go("app.order-payment",{code:r.Code})}).catch(function(e){d.error(e)}).finally(function(){u.loadingUpdateDraft=!1})},u.back=function(){o.history.back()},u.voidDraft=function(r){confirm("Apakah Anda yakin untuk membatalkan pesanan ini?")&&(u.loadingVoidDraft=!0,i.voidDraft(r).then(function(r){d.info("Pesanan telah dibatalkan."),e.go("app.order.draft")}).catch(function(e){d.error(e)}).finally(function(){u.loadingVoidDraft=!1}))},u.getLocations=function(e){return l.getLocations(e).then(e=>e.result)},u.selectLocation=f,u.selectPricingOption=m,u.updateDetail=function(e){e.ShippingFee=u.pricingOption?u.pricingOption.calculationResult:0,g()},u.removeCurrentShippingInformation=h,u.calculate=g,(s=n.code)||e.go("app.order"),c=s,u.loadingGetOrderByCode=!0,i.getByCode(c).then(function(r){if("DRAFTED"!=r.Status&&e.go("app.order.draft"),u.order=r,u.order.ShippingDestination&&u.order.ShippingProductCode)return console.log("Fetching shipping information"),f(u.order.ShippingDestination).then(()=>{console.log("Success fetching shipping information"),m(u.pricingOptions.find(e=>e.productCode==u.order.ShippingProductCode))})}).catch(function(e){d.error(e)}).finally(function(){u.loadingGetOrderByCode=!1}),l.getWeightRoundingLimit().then(e=>{p=e.result})}function OrderDraftController(e,r,t,o){var n=this;function a(r){var o=[];o.push(e.getAllDraft(r,n.currentUser.kiosk.code)),o.push(e.countAllDraft(r,n.currentUser.kiosk.code)),n.loadingGetOrders=!0,n.isError=!1,t.all(o).then(function(e){var r=e[0];n.orders=r,r=e[1],n.orderQuery.count=r.count}).catch(function(e){n.isError=!0}).finally(function(){n.loadingGetOrders=!1})}n.currentUser=o.getUser(),n.changePage=function(){a(n.orderQuery)},n.getOrders=a,n.orders=[],n.orderQuery={keyword:"",orderBy:"-CreatedDate",page:1,limit:9},a(n.orderQuery)}function OrderHistoryController(e,r,t,o){var n=this;function a(r){var o=[];o.push(e.getAllHistory(r,n.currentUser.kiosk.code).then(function(e){n.orders=e})),o.push(e.countAllHistory(r,n.currentUser.kiosk.code).then(function(e){n.orderQuery.count=e.count})),n.loadingGetOrders=!0,t.all(o).then(function(e){}).catch(function(e){}).finally(function(){n.loadingGetOrders=!1})}n.changePage=function(){a(n.orderQuery)},n.openDetail=function(e){r.open({animation:!0,templateUrl:"app/order/detail.modal.html",controller:"OrderDetailModalController",controllerAs:"vm",size:"lg",resolve:{code:function(){return e}}})},n.currentUser=o.getUser(),n.orders=[],n.orderQuery={keyword:"",orderBy:"-CreatedDate",page:1,limit:9},a(n.orderQuery)}function OrderTrackController(e,r,t){var o,n=this;n.code="",n.submitOrder=function(e){r.go("app.order.track",{code:e})},n.code=t.code,n.code&&(o=n.code,n.loadingGetOrder=!0,n.message="",e.getByCode(o).then(function(e){n.order=e}).catch(e=>{n.message=e}).finally(()=>{n.loadingGetOrder=!1}))}function OrderVerifyController(e,r,t,o,n,a){var i=this;function l(e){return e=0==e?0:e<1?1:e-Math.floor(e)>.3?Math.ceil(e):Math.floor(e)}function d(t,o){i.loadingGetOrder=!0,delete i.order,delete i.orderPayment,e.getByCodePIN(t,o).then(function(e){if(0==e.length)return void r.error("Anda memasukkan Kode/PIN yang salah.","Pesan");var o=e[0];if("ARRIVED"!=o.Status&&"COMPLETED"!=o.Status&&"REJECTED"!=o.Status&&"REFUNDED"!=o.Status)return void r.warning("Pesanan anda sedang diproses.","Pesan");i.order=o;let n=i.order.OrderDetails.reduce((e,r)=>e+("REJECTED"==r.Status||"REFUNDED"==r.Status?r.Price:0),0);i.order.DPAmount=0;var a=i.order.OrderPayments.find(e=>"DOWN PAYMENT"==e.PaymentType);a&&(i.order.DPAmount=a.PaidAmount);let d=i.order.OrderPayments.reduce((e,r)=>e+r.PaidAmount,0),c=0;if(i.order.TotalShippingFee>0){Array.from(new Set(i.order.OrderDetails.map(e=>e.DealerCode))).forEach(e=>{let r=l(i.order.OrderDetails.reduce((e,r)=>e+r.Weight,0))*i.order.OrderDetails[0].ShippingFee,t=l(i.order.OrderDetails.filter(e=>"REJECTED"!=e.Status&&"REFUNDED"!=e.Status).reduce((e,r)=>e+r.Weight,0))*i.order.OrderDetails[0].ShippingFee;c+=r-t})}let s=i.order.TotalPrice+i.order.TotalShippingFee-n-d-c;0!=s&&(i.orderPayment={PaymentType:s>0?"FULFILLMENT":"REFUNDMENT",OrderCode:t,PaidAmount:s,Amount:s})}).catch(function(e){r.error(e)}).finally(function(){i.loadingGetOrder=!1})}i.searchOrderByCodeAndPin=d,i.pay=function(t){i.loadingPay=!0,e.pay(t).then(function(e){return d(i.code,i.pin)}).catch(function(e,t){r.error(e)}).finally(function(){i.loadingPay=!1})},i.completeOrder=function(t){i.loadingCompleteOrder=!0,e.complete(t.Code).then(function(e){return r.success("Transaksi telah selesai dilakukan."),d(i.code,i.pin)}).catch(function(e){r.error(e)}).finally(function(){i.loadingCompleteOrder=!1})},i.goToPrint=function(){var e=t("orderBy")(i.order.OrderPayments,"-TransactionDate")[0].id,r=n.href("blank.invoice",{code:i.order.Code,paymentId:e});a.open(r,"_blank")}}function OrderPaymentController(e,r,t,o,n,a,i,l,d){var c,s,u=this;function p(e){u.loadingPay=!0,l.pay(e).then(r=>l.getByCode(e.OrderCode)).then(e=>{u.orderToBePrinted=e,u.message="Pesanan Anda telah berhasil dilakukan!"}).catch(function(e){a.error(e)}).finally(function(){u.loadingPay=!1})}function f(e){u.orderPayment.Amount=u.order.TotalShippingFee,"FULL PAYMENT"==e?(u.orderPayment.Amount+=u.order.TotalPrice,u.orderPayment.PaidAmount=u.orderPayment.Amount):"DOWN PAYMENT"==e&&(u.orderPayment.Amount+=u.order.DP,u.orderPayment.PaidAmount=0)}u.order={},u.orderPayment={},u.pay=p,u.changePaymentType=f,u.goToPrint=function(){var e=r("orderBy")(u.orderToBePrinted.OrderPayments,"-TransactionDate")[0].id,t=o.href("blank.invoice",{code:u.orderToBePrinted.Code,paymentId:e});n.open(t,"_blank")},u.confirmPayment=function(e){if(e.Amount>e.PaidAmount)return void a.error("Insufficient funds!");d.open({animation:!0,templateUrl:"paymentConfirmation.html",controller:"PaymentConfirmationController",controllerAs:"vm",size:"md",resolve:{order:function(){return u.order},orderPayment:function(){return e}}}).result.then(r=>p(e))},s=t.code,c=s,u.loadingGetOrderByCode=!0,l.getByCode(c).then(function(e){e.IsFullyPaid&&(a.error("Pesanan sudah dibayar."),o.go("app.order.draft")),"REQUESTED"==e.Status&&o.go("app.order.draft"),u.order=e,u.orderPayment={OrderCode:c,PaidAmount:0,Amount:u.order.TotalPrice+u.order.TotalShippingFee-u.order.DP,PaymentType:"FULL PAYMENT"},f("FULL PAYMENT")}).catch(function(e){a.error(e)}).finally(function(){u.loadingGetOrderByCode=!1})}function PaymentConfirmationController(e,r,t,o,n,a){var i=this;function l(){return i.loadingGetWalletBalance=!0,n.getWalletBalance(e.getUser().email).then(e=>{var r=e.result;a.$settings.walletBalance=r.topupCredit+r.rewardCredit||0}).catch(e=>{}).finally(()=>{i.loadingGetWalletBalance=!1})}i.orderPayment=o,i.ok=function(){r.close()},i.cancel=function(){r.dismiss("cancel")},i.getWalletBalance=l,l(),t.TotalPrice+t.TotalShippingFee<=o.PaidAmount&&(i.orderPayment.PaymentType="FULL PAYMENT",i.orderPayment.Amount=i.orderPayment.PaidAmount=t.TotalPrice+t.TotalShippingFee)}function orderDetail(){return{restrict:"E",replace:!0,scope:{order:"="},link:(e,r,t,o)=>{let n=e.order.OrderPayments.find(e=>"DOWN PAYMENT"==e.PaymentType);e.order.DPAmount=n?n.PaidAmount:0;let a=e.order.OrderDetails.reduce((e,r)=>e+("REJECTED"==r.Status||"REFUNDED"==r.Status?r.Price:0),0),i=0;if(e.order.TotalShippingFee>0){Array.from(new Set(e.order.OrderDetails.map(e=>e.DealerCode))).forEach(r=>{let t=l(e.order.OrderDetails.reduce((e,r)=>e+r.Weight,0))*e.order.OrderDetails[0].ShippingFee,o=l(e.order.OrderDetails.filter(e=>"REJECTED"!=e.Status&&"REFUNDED"!=e.Status).reduce((e,r)=>e+r.Weight,0))*e.order.OrderDetails[0].ShippingFee;i+=t-o})}function l(e){return e=0==e?0:e<1?1:e-Math.floor(e)>.3?Math.ceil(e):Math.floor(e)}e.order.Refund=a+i,e.order.GrandTotal=e.order.TotalPrice+e.order.TotalShippingFee-e.order.Refund},templateUrl:"app/order/_detail.html"}}function ProductDetailModalController(e,r,t,o){var n,a=this;a.product={},a.close=function(){t.dismiss("cancel")},a.addToCart=function(e){t.close(e)},n=e,a.loadingGetProduct=!0,r.getByCode(n).then(function(e){a.product=e[0];try{a.product.ArrayedSpecification=JSON.parse(e[0].Specification)}catch(e){}}).catch(function(e){o.error(e)}).finally(function(){a.loadingGetProduct=!1})}function ProductController(e,r,t,o,n,a,i,l,d,c,s,u){var p=this;function f(e){l.addOrderItem({code:e.Code,sku:e.SKU,name:e.Name,description:e.Description,specification:e.Specification,image:e.Image,brandCode:e.BrandCode,dp:e.DP,price:e.Price,dealerCode:e.DealerCode}),a.success("Item telah ditambahkan ke kerajang belanja.","Pesan")}function m(r,t){p.isError=!1,p.loadingProducts=!0;var o=[];o.push(i.getAll(t,p.currentUser.kiosk.code)),o.push(i.countAll(t,p.currentUser.kiosk.code)),e.all(o).then(e=>{for(var o=e[0],n=0,a=o.length;n<a;n++){try{o[n].ArrayedSpecification=JSON.parse(o[n].Specification)}catch(e){}r.push(o[n])}o=e[1],t.count=o.count}).catch(e=>{p.isError=!0}).finally(()=>{p.loadingProducts=!1})}p.currentUser=d.getUser(),p.isStaff=d.isStaff(),p.products=[],p.productQuery={},p.$settings=r.$settings,p.openDetailItem=function(e){n.open({animation:!0,templateUrl:"app/product/detail.modal.html",controller:"ProductDetailModalController",controllerAs:"vm",size:"lg",resolve:{code:function(){return e.Code}}}).result.then(function(e){f(e)})},p.addOrderItem=f,p.nextPage=function(e){e.page++,m(p.products,e)},p.getProducts=m,p.openMessenger=function(e){return s.getUserIdByDealerCode(e.DealerCode).then(r=>{0!=r.length?u.add((new function(){this.timestamp=+new Date;this.generate=function(e=8){for(var r,t,o=this.timestamp.toString(),n=o.split("").reverse(),a="",i=0;i<e;++i){var l=(r=0,t=n.length-1,Math.floor(Math.random()*(t-r+1))+r);a+=n[l]}return a}}).generate(),r[0].UserId,r[0].DealerCode):a.error(`There are no users assigned to dealer ${e.DealerCode}`)})},p.filterPrice=function(e){e.page=1,p.products=[],m(p.products,e)},p.products=[],p.productQuery={keyword:"",orderBy:"+Name",page:1,limit:9,priceRange:{min:0,max:0,display:"Semua"}},o.keyword||o.brand||o.category||t.go("app.home"),p.productQuery.keyword=o.keyword,p.productQuery.brandCode=o.brand,p.productQuery.categoryCode=o.category,p.priceRangeOptions=[{min:0,max:0,display:"Semua"},{min:0,max:2e6,display:"< Rp. 2jt"},{min:2000001,max:5e6,display:"Rp. 2jt - Rp. 5jt"},{min:5000001,max:1e7,display:"Rp. 5jt - Rp. 10jt"},{min:10000001,max:0,display:"> Rp. 10jt"}],p.productQuery.priceRange=p.priceRangeOptions[0],m(p.products,p.productQuery)}function featuredItem(){return{restrict:"E",replace:!0,scope:{product:"=",openDetailItem:"&",addOrderItem:"&"},templateUrl:"app/product/_featured-item.html"}}function productItemCard(){return{restrict:"E",replace:!0,scope:{product:"=",openDetailItem:"&",addOrderItem:"&",openMessenger:"&",isMessengerReady:"=",isStaff:"="},templateUrl:"app/product/_item-card.html"}}angular.module("app",["ui.router","ui.bootstrap","ngStorage","fcsa-number","toastr","ngTouch","firebase","app.authentication"]),angular.module("app").factory("httpInterceptor",httpInterceptor),httpInterceptor.$inject=["$q","$rootScope","$localStorage"],angular.module("app").config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]),angular.module("app").config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]),angular.module("app").config(["$localStorageProvider",function(e){e.setKeyPrefix("jet-o2o-")}]),angular.module("app").factory("settings",settings),settings.$inject=["$rootScope"],angular.module("app").run(runBlock),runBlock.$inject=["$rootScope","$state","$transitions","settings","AuthenticationState"],angular.module("app").filter("sum",sum),angular.module("app").filter("messageTime",messageTime),messageTime.$inject=["$filter"],angular.module("app").filter("timeDifference",timeDifference),angular.module("app").filter("isEmpty",function(){var e;return function(r){for(e in r)if(r.hasOwnProperty(e))return!1;return!0}}),angular.module("app").directive("a",function(){return{restrict:"E",link:function(e,r,t){(t.ngClick||""===t.href||"#"===t.href)&&r.on("click",function(e){e.preventDefault()})}}}),angular.module("app").directive("backButton",["$window",function(e){return{restrict:"A",link:function(r,t,o){t.bind("click",function(){e.history.back()})}}}]),angular.module("app").directive("ngSpinnerBar",["$rootScope","$transitions",function(e,r){return{link:function(e,t,o){t.addClass("hide"),r.onStart({},function(){t.removeClass("hide")}),r.onSuccess({},function(){t.addClass("hide")})}}}]),angular.module("app").config(routeConfig),routeConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app.authentication",[]),angular.module("app.authentication").service("AuthenticationService",AuthenticationService),AuthenticationService.$inject=["$http","Urls"],angular.module("app").service("BrandService",BrandService),BrandService.$inject=["$http","Urls"],angular.module("app").service("CategoryService",CategoryService),CategoryService.$inject=["$http","Urls"],angular.module("app").service("DealerService",DealerService),DealerService.$inject=["$http","Urls"],angular.module("app").service("HomeService",HomeService),HomeService.$inject=["$http"],angular.module("app").service("NotificationService",NotificationService),NotificationService.$inject=["$http","Urls"],angular.module("app").service("OrderService",OrderService),OrderService.$inject=["$http","Urls"],angular.module("app").service("ProductService",ProductService),ProductService.$inject=["$http","Urls"],angular.module("app").service("ShippingService",ShippingService),ShippingService.$inject=["$http","Urls"],angular.module("app").service("WalletService",WalletService),WalletService.$inject=["$http","Urls"],angular.module("app.authentication").factory("AuthenticationState",AuthenticationState),AuthenticationState.$inject=["$http","$localStorage"],angular.module("app").factory("MessageChannels",MessageChannels),MessageChannels.$inject=["$firebaseArray","$timeout"],angular.module("app").factory("Order",Order),Order.$inject=["$sessionStorage","$filter"],angular.module("app").filter("totalPrice",totalPrice),angular.module("app").filter("dpNominal",dpNominal),angular.module("app").filter("totalDPNominal",totalDPNominal),angular.module("app").filter("humanify",humanify),angular.module("app.authentication").controller("ChangeModeModalController",ChangeModeModalController),ChangeModeModalController.$inject=["AuthenticationService","AuthenticationState","$uibModalInstance","toastr"],angular.module("app.authentication").controller("ChangePasswordModalController",ChangePasswordModalController),ChangePasswordModalController.$inject=["AuthenticationService","AuthenticationState","$uibModalInstance","toastr"],angular.module("app.authentication").controller("LoginController",LoginController),LoginController.$inject=["AuthenticationService","AuthenticationState","$q","$state"],angular.module("app").directive("imageApi",imageApi),imageApi.$inject=["Urls"],angular.module("app").directive("loadingIndicator",loadingIndicator),angular.module("app").directive("noData",noData),angular.module("app").directive("reloadIndicator",reloadIndicator),angular.module("app").controller("HomeController",HomeController),HomeController.$inject=["$state","HomeService","ProductService","AuthenticationState","Order","toastr","$uibModal"],angular.module("app").controller("InvoiceController",InvoiceController),InvoiceController.$inject=["$stateParams","$filter","$timeout","$window","OrderService","AuthenticationState"],angular.module("app").directive("invoiceDownPayment",invoiceDownPayment),angular.module("app").directive("invoiceFulfillment",invoiceFulfillment),angular.module("app").directive("invoiceFullPayment",invoiceFullPayment),angular.module("app").directive("invoiceRefundment",invoiceRefundment),angular.module("app").controller("FooterController",FooterController),FooterController.$inject=[],angular.module("app").controller("HeaderController",HeaderController),HeaderController.$inject=["$state","$stateParams","$timeout","$q","toastr","Order","BrandService","CategoryService","AuthenticationService","AuthenticationState","NotificationService","WalletService","$uibModal","$window","$rootScope"],angular.module("app").controller("MessengerController",MessengerController),MessengerController.$inject=["MessageChannels","AuthenticationState","$location","$anchorScroll","$timeout","$rootScope"],angular.module("app").controller("NotificationController",NotificationController),NotificationController.$inject=["$state","$q","AuthenticationState","NotificationService"],angular.module("app").controller("OrderCheckoutController",OrderCheckoutController),OrderCheckoutController.$inject=["$state","$window","toastr","Order","AuthenticationState"],angular.module("app").controller("OrderConfirmMessageController",OrderConfirmMessageController),OrderConfirmMessageController.$inject=["$stateParams"],angular.module("app").controller("OrderConfirmController",OrderConfirmController),OrderConfirmController.$inject=["$state","$window","toastr","Order","OrderService","$timeout","$filter","AuthenticationState"],angular.module("app").controller("OrderDetailModalController",OrderDetailModalController),OrderDetailModalController.$inject=["code","OrderService","$uibModalInstance","$window","toastr"],angular.module("app").controller("OrderCheckInController",OrderCheckInController),OrderCheckInController.$inject=["OrderService","toastr"],angular.module("app").controller("OrderController",OrderController),OrderController.$inject=["$state"],angular.module("app").controller("OrderDetailController",OrderDetailController),OrderDetailController.$inject=["$state","$rootScope","$filter","$window","$stateParams","AuthenticationState","OrderService","ShippingService","toastr"],angular.module("app").controller("OrderDraftController",OrderDraftController),OrderDraftController.$inject=["OrderService","toastr","$q","AuthenticationState"],angular.module("app").controller("OrderHistoryController",OrderHistoryController),OrderHistoryController.$inject=["OrderService","$uibModal","$q","AuthenticationState"],angular.module("app").controller("OrderTrackController",OrderTrackController),OrderTrackController.$inject=["OrderService","$state","$stateParams"],angular.module("app").controller("OrderVerifyController",OrderVerifyController),OrderVerifyController.$inject=["OrderService","toastr","$filter","$timeout","$state","$window"],angular.module("app").controller("OrderPaymentController",OrderPaymentController),OrderPaymentController.$inject=["$rootScope","$filter","$stateParams","$state","$window","toastr","Order","OrderService","$uibModal"],angular.module("app").controller("PaymentConfirmationController",PaymentConfirmationController),PaymentConfirmationController.$inject=["AuthenticationState","$uibModalInstance","order","orderPayment","WalletService","$rootScope"],angular.module("app").directive("orderDetail",orderDetail),angular.module("app").controller("ProductDetailModalController",ProductDetailModalController),ProductDetailModalController.$inject=["code","ProductService","$uibModalInstance","toastr"],angular.module("app").controller("ProductController",ProductController),ProductController.$inject=["$q","$rootScope","$state","$stateParams","$uibModal","toastr","ProductService","Order","AuthenticationState","Urls","DealerService","MessageChannels"],angular.module("app").directive("featuredItem",featuredItem),angular.module("app").directive("productItemCard",productItemCard),angular.module("app").constant("Urls",{BASE_API:"http://jet-o2o-webapi.azurewebsites.net/api"}),angular.module("app").config(()=>{firebase.initializeApp({apiKey:"AIzaSyAocf61QRJ5oa8rWSoc5SyaIsVaEi5eW_0",authDomain:"o2o-7cb1f.firebaseapp.com",databaseURL:"https://o2o-7cb1f.firebaseio.com",projectId:"o2o-7cb1f",storageBucket:"o2o-7cb1f.appspot.com",messagingSenderId:"920639585652"})});